{"version":3,"file":"page-index.js","sources":["../src/page-index.ts"],"sourcesContent":["export default class PageIndex extends HTMLElement {\n\tpublic connectedCallback(): void {\n\t\tthis.render();\n\t}\n\n\tprivate getAttr = (attr: string, fallback?: string) => {\n\t\tif (this.hasAttribute(attr)) return this.getAttribute(attr) || fallback;\n\t\treturn undefined;\n\t};\n\n\tprivate render(): void {\n\t\t// Add id to body if there isn't one already\n\t\tdocument.body.id || document.body.setAttribute(\"id\", \"page-index-body\");\n\n\t\t// Build Page Index Header Area\n\t\tlet header = this.getAttr(\"header\", \"Page Index\");\n\t\theader = header ? `<h2>${header}</h2>` : \"\";\n\t\tlet top = this.getAttr(\"top\", \"Top\");\n\t\ttop = top ? `<a href=\"#${document.body.id}\">${top}</a>` : \"\";\n\t\tconst headerArea = header || top ? `<div class=\"page-index-header\">${header}${top}</div>` : \"\";\n\n\t\t// Get all Index Items from selector\n\t\tconst targets = document.querySelectorAll(this.getAttribute(\"selector\") || \"main h2\") as NodeListOf<HTMLElement>;\n\n\t\t// Add id to targets if there isn't one already\n\t\ttargets.forEach((header, i) => !header.id && header.setAttribute(\"id\", \"page-index-\" + i));\n\n\t\t// Build Page Index HTML\n\t\tthis.innerHTML = `\n        <nav aria-label=\"${this.getAttribute(\"aria\") || \"Page Index\"}\">${headerArea}<ul>${Array.from(targets)\n\t\t\t.map((header) => `<li class=\"page-index-item-${header.tagName.toLowerCase()}\"><a href=\"#${header.id}\">${header.dataset.index || header.textContent}</a></li>`)\n\t\t\t.join(\"\")}</ul></nav>`;\n\t}\n}\ncustomElements.define(\"page-index\", PageIndex);\n"],"names":["PageIndex","__publicField","attr","fallback","header","top","headerArea","targets","i"],"mappings":"wKAAA,MAAqBA,UAAkB,WAAY,CAAnD,kCAKSC,EAAA,eAAU,CAACC,EAAcC,IAAsB,CAClD,GAAA,KAAK,aAAaD,CAAI,EAAU,OAAA,KAAK,aAAaA,CAAI,GAAKC,CACxD,GAND,mBAA0B,CAChC,KAAK,OAAO,CACb,CAOQ,QAAe,CAEtB,SAAS,KAAK,IAAM,SAAS,KAAK,aAAa,KAAM,iBAAiB,EAGtE,IAAIC,EAAS,KAAK,QAAQ,SAAU,YAAY,EACvCA,EAAAA,EAAS,OAAOA,CAAM,QAAU,GACzC,IAAIC,EAAM,KAAK,QAAQ,MAAO,KAAK,EACnCA,EAAMA,EAAM,aAAa,SAAS,KAAK,EAAE,KAAKA,CAAG,OAAS,GAC1D,MAAMC,EAAaF,GAAUC,EAAM,kCAAkCD,CAAM,GAAGC,CAAG,SAAW,GAGtFE,EAAU,SAAS,iBAAiB,KAAK,aAAa,UAAU,GAAK,SAAS,EAGpFA,EAAQ,QAAQ,CAACH,EAAQI,IAAM,CAACJ,EAAO,IAAMA,EAAO,aAAa,KAAM,cAAgBI,CAAC,CAAC,EAGzF,KAAK,UAAY;AAAA,2BACQ,KAAK,aAAa,MAAM,GAAK,YAAY,KAAKF,CAAU,OAAO,MAAM,KAAKC,CAAO,EACxG,IAAKH,GAAW,8BAA8BA,EAAO,QAAQ,YAAY,CAAC,eAAeA,EAAO,EAAE,KAAKA,EAAO,QAAQ,OAASA,EAAO,WAAW,WAAW,EAC5J,KAAK,EAAE,CAAC,aACX,CACD,CACA,eAAe,OAAO,aAAcJ,CAAS"}